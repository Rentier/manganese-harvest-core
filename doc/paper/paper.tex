\documentclass{article}

\usepackage[ngerman]{babel} 

\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm} 
\usepackage{ wasysym }
\usepackage[justification=centering]{caption}
\usepackage[parfill]{parskip}
\usepackage[left=3cm,right=3cm,top=2cm,bottom=2cm,includeheadfoot]{geometry}
\usepackage{subfig}
\usepackage{units}
\usepackage[named]{algo}
\usepackage{textcomp}
\usepackage{tikz}
\usetikzlibrary{shapes}

\newtheorem{satz}{Satz} 


\usepackage[sortcites=true, style=alphabetic,natbib=true]{biblatex}

\bibliography{bibliography}

%Autornamen in Bibliography fett
\AtBeginBibliography{\renewcommand*{\mkbibnamelast }[1]{\textbf{#1}}}
\AtBeginBibliography{\renewcommand*{\mkbibnamefirst }[1]{\textbf{#1}}}


\begin{document}
% Title page

% ############################################
\section{Problembeschreibung und -analyse}

\subsection{Problembeschreibung}

Die Hauptschwierigkeit des Problems liegt daran, dass es sich eigentlich
um eine Kombination aus (mindestens) zwei Problemen handelen. Jedes Problem
für sich ist gut beschrieben und gelöst worden, doch für alles gleichzeitig
nicht.

\begin{enumerate}
\item Graph coloring - Visit stuff
\item Evacuate 
\end{enumerate}

\subsection{Annahmen über das Problem}

\begin{itemize}
\item Roboter sind punktförmig
\item Können in der Bewegung saugen
\item Keine Beschränkung, wie viele Roboter sich in einem Punkt befinden
\item Kommunikation ist instantan und ohne Berechnungszeit (Senden wie Empfangen)
\item Kommunikation zwischen Robotern kann alles sein
\item Roboter haben unbeschränkt viel Speicher
\end{itemize}

\subsection{Disclaimer}

Einschränkungen nicht simuliert, aber deren Auswirkungen

% ############################################
\clearpage
\section{Vorgehensmodell}

\begin{itemize}
\item Keep it simple
\item Start with working prototype before you do srs stuff
\item Getrennt marschieren, zusammen kämpfen (self contained subprograms, assemble at the end, bottom to top)
\item ipython notebook
\item using a lib before reinventing the wheel
\item Optimize when needed, first correct and working, then fast
\item 90 \% thinking, 10 \% coding
\item Abstract away decisions not made or which might change (geometry, polygon, agent)
\end{itemize}

\subsection{Design-Ziele}

\subsection{Nicht-Ziele}

Schöne UI, nur usable

% ############################################
\clearpage
\section{Problembetrachtung}

Das Problem kann unter vielen verschiedenen betrachtet 
werden. Je nachdem, in welcher Domäne der Informatik
es eingeordnet wird, gibt es unterschiedliche Lösungsansätze.

In diesem Abschnitt wird kurz beschrieben, welche Ansätze
erdacht wurden, welches deren Vor- und Nachteile sind, und
für welche schließlich ausgewählt wurden.

\subsection{Graphenproblem}

Suche

\subsection{Optimierungsproblem}

\subsection{Maschinenlernen}

\subsection{Künstliche Intelligenz}



% ############################################
\clearpage
\section{Umgebung}

Die Modellierung des Meeresbodens hat zum Ziel, die folgenden 
Fragen zu beantworten oder einen guten Kompromiss zu finden:

\begin{enumerate}
\item Wie lassen sich eine begrenzte Anzahl an Kreisen auf einer 
unendlichen Fläche anorden, sodass die nicht von Kreisen bedeckte Fläche minimal 
ist (vergleichbar mit dem Ausstechen von Kreisen aus Keksteig)?
\item Wie lässt sich der Meeresboden unterteilen, sodass eine Simulation
möglichst einfach wird?
\end{enumerate}

Geplant ist, dass die Missionsdauer in Zeitschritt von 1s aufgeteilt wird.
In jedem Zeitschritt bewegen sich die Roboter einen geometrischen Schritt
auf dem Meeresboden weiter und säubern ihn dabei von Manganknollen. Der Vorteil
darin besteht, dass die Optimierung der Ausbeute darauf reduziert wird, 
den nächsten Schritt möglichst geeignet auszuwählen.

Dazu werden unendlichen Weiten des pazifischen Meeresgrundes
in Abschnitte in Form von Polygonen eingeteilt (parkettiert),
damit der Wertebereich der nächsten möglichen Schritte diskretisiert wird.

Die Wahl, mit welchem Polygon gearbeitet wird, hat direkte
Auswirkungen auf Genauigkeit und Leistungsfähigkeit der 
Simulation, wie im Folgenden gezeigt wird.

\subsection{Konkrete Modellierung des Meeresbodens}

Der Meeresboden kann dann als Graph gesehen werden, bei denen Knoten 
als Zellen gesehen werden und geometrisch einem Polygon entsprechen. 
Angeordnet werden diese so, dass zwischen den Mittelpunkten der Innenkreise
zweier benachbarter Zellen exakt 1m Abstand ist. Dies hat den Grund, dass 
ein Roboter in jedem Zeitschritt in die Mitte der nächste Zelle wechseln kann.

Der Zusammenhang zwischen realer Umgebung und Modellierung ist in
Fig. \ref{fig:tess_triangle} - \ref{fig:tess_hexagon} visualisiert.

\begin{figure}[!ht]
  \centering
  \subfloat[][]{\includegraphics[width=.45\textwidth]{img/triangle_grid.png}}\qquad
  \subfloat[][]{\includegraphics[width=.4\textwidth]{img/triangle_graph.png}}\\
  \caption{Parkettierung mit gleichseitigen Dreiecken}
  \label{fig:tess_triangle}
\end{figure}

\begin{figure}[!ht]
  \centering
  \subfloat[][]{\includegraphics[width=.4\textwidth]{img/square_grid.png}}\qquad
  \subfloat[][]{\includegraphics[width=.5\textwidth]{img/square_graph.png}}\\
  \caption{Parkettierung mit Quadraten}
  \label{fig:tess_square}
\end{figure}

\begin{figure}[!ht]
  \centering
  \subfloat[][]{\includegraphics[width=.45\textwidth]{img/hexagon_grid.png}}\qquad
  \subfloat[][]{\includegraphics[width=.4\textwidth]{img/hexagon_graph.png}}\\
  \caption{Parkettierung mit regelmäßigen Sechsecken}
  \label{fig:tess_hexagon}
\end{figure}

Roboter werden so simuliert, dass die Bewegungen nur über die Kanten einer
Zelle möglich sind. Daher ist Anzahl der Ecken identisch mit den möglichen
Bewegungsrichtungen. Somit gilt: je mehr Ecken, desto mehr Freiheitsgrade.
Die Kanten geben an, von welchem Knoten zu welchen Nachbarn gewechselt werden
kann. Somit hat jeder Knoten auch so viele Kanten wie das gewählte Polygon
Ecken hat.

Nach \cite[S. 12]{hartfeldt2002} gilt: 
\newline
\begin{satz} 
Eine lückenlose Parkettierung \textbf{ohne} Überschneidungen ist nur mit den 
regulären n-Ecken für n = 3,4,6 möglich.
\end{satz}

Da eine Simulation mit unregelmäßiger Parkettierung unnötig komplex erscheint,
entscheidet es sich zwischen gleichseitigem Dreieck, Quadrat und regelmäßigem Sechseck.

\subsection{Polygone und Innenkreis}

Der Arbeitsbereich eines Roboters ist kreisförmig, die Zellen, in denen er
sich befindet, jedoch ein Polygon. Daher gibt es in den Ecken der Zelle 
Bereiche, die nicht (unmittelbar) gesaugt werden. Berechnen lässt 
sich der Verlust $Q$ über das Verhältnis von der Fläche des Innenkreises 
des Polygons zum Flächeninhalt des Polygons selbst:

\begin{equation}
  Q = \frac{A_\text{Kreis} }{A_\text{Polygon}}
\end{equation}

\begin{figure}[!ht]
  \centering
  \subfloat[][]{\includegraphics[width=.4\textwidth]{img/triangle_circle.png}}\qquad
  \subfloat[][]{\includegraphics[width=.25\textwidth]{img/square_circle.png}}\qquad
  \subfloat[][]{\includegraphics[width=.25\textwidth]{img/hexagon_circle.png}}\\
  \caption{Regelmäßiges 3,4,6-Eck mit eingezeichnetem Innenkreis und Radius}
  \label{fig:floor_quotient_circle_polygon}
\end{figure}

Die folgende Tabelle zeigt das Verhälntis von den drei Polygonen. 


\begin{figure}[ht]
\begin{center}
    \begin{tabular}{ l | l}
    n & Q \\ \hline
    3 & 60,46 \% \\
    4 & 78,50 \% \\
    6 & 90,69 \% \\
    \end{tabular}
    \caption{Verhältnis $Q$ der Flächeninhalte von Innenkreis \\ eines n-Ecks und dessen gesamten Flächeninhalts}
    \end{center}
\end{figure}

Somit würde zum Beispiel bei Modellierung durch Zellen in Form von regelmäßigen Dreiecken ein Roboter
nur 60 \% des Mangans darin einsammeln. Je größer $n$, desto besser wird die unmittelbare Ausbeute.


Die genaue Herleitung kann unter HIER\footnote{HIER} nachvollzogen werden.

\begin{figure}
\includegraphics{img/dummy.png}
\caption{Fehlerrechnung}
\label{img:floor_error_circle_polygon}
\end{figure}

\subsection{Entscheidung}

Die Auswahl fiel schließlich leicht, da die Simulation mit einem Quadrat als 
zugrundeliegendem Polygon folgende Vorteile bietet:

\begin{itemize}
\item Einfache Datenstruktur
\item Einfaches Berechnen der Nachbarn
\item Visualisierung einfach, da eine Zelle einem Pixel entspricht, somit keine Umrechnung nötig
\item Weniger Verlust als Dreieck
\item Weniger Freiheitsgrade als Sechseck (weniger Auswahl bedeutet weniger Rechenaufwand)
\item Einfache Berechnung von Entfernungen zwischen zwei Zellen \ref{sec:manhattan}
\end{itemize}

Als wie gut sich diese Entscheidung schließlich herausgestellt hat, wird im Abschnitt 
HIER\footnote{HIER2} evaluiert.

% ############################################
\clearpage
\section{Theory Crafting}

Der folgende Abschnitt beschreibt die zugrundeliegende Theorie hinter der Implementierung.

%#
\subsection{Manhattan-Metrik}
\label{sec:manhattan}

Die Manhattan-Metrik (oder Taxicab-Metrik, Cityblock-Metrik), ist eine Geometry, in der
die übliche, euklidische Entfernungsfunktion durch eine neue Metrik ersetzt ist.

\begin{figure}[!ht]
  \centering
  \subfloat[][New York]{\includegraphics[width=.35\textwidth]{img/manhattan.png}}\qquad
  \subfloat[][Mannheim]{\includegraphics[width=.5\textwidth]{img/mannheim.png}}\\
  \caption{Auszüge aus Stadplänen von New York und Mannheim. \\ Auffallend ist die gitterförmige
  Anordnung der Straßenzüge. }
  \label{fig:tess_hexagon}
\end{figure}

Ihr Name entstammt der Analogie mit dem Straßennetz von Manhattan (oder Mannheim, wo sich
die Universität der beiden Autoren befindet). Es ist gitterförmig angelegt. Um ein Ziel zu erreichen,
wird die Entfernung durch Aneinanderreihung von vertikalen und Horizontalen Stücken zurückgelegt.

Ein Taxifahrer, welcher eine Route durch solch eine System plant, legt immer die gleiche 
Strecke zurück, wenn er Wege benutzt, die ihn näher zum Ziel bringen. 

Da diese Geometrie der Modellierung des Meeresbodens durch Quadrate entspricht, werden im Folgenden
notwendige und wichtige Eigenschaften derer beschrieben.

\subsubsection{Entfernung}

Die Entfernung zwischen zwei Punkten $a, b \in \mathbb{R}^n$ in einer Manhattan-Geometrie ist die Summe 
der absoluten Differenzen derer kartesischer Einzelkoordinaten:

\begin{equation*}
d(a,b)=\sum_{i=1}^n \left|a_i-b_i\right|\,
\end{equation*}

Für den hier relevanten Spezialfall von $\mathbb{R}^2$ gilt somit:

\begin{equation*}
d(a,b)=|a_1-b_1|+|a_2-b_2|
\end{equation*}

\begin{figure}[!ht]
  \centering
  \includegraphics[width=.45\textwidth]{img/taxicab_distance.png}
  \caption{Verschiedene, gleichgroße Taxicab-Distanzen zwischen zwei Punkten (je 12 Einheiten lang). 
  Zum  Vergleich ist die grüne Linie die euklidische Distanz (etwa 8,5 Einheiten) eingetragen. \cite{wikicity}}
  \label{fig:tess_triangle}
\end{figure}

\subsubsection{Kreise}

Ein Kreis ist die Menge aller Punkte in einer Ebene, die einen konstanten Abstand, dem Radius, zu einem bestimmten
Punkt, dem Mittelpunkt, haben. Die gewählte Metrik, die in dem Wort \textit{Abstand} versteckt ist,
hat unmittelbar Einfluss auf die Form des Kreises.

Kreise in einer Taxicab-Geometrie haben die Form von Quadraten, die um \unit[45]{\textdegree} um deren Mittelpunkt gedreht sind.
Fig. \ref{img:circle_in_diff_metrics} gibt eine Idee, wieso es so ist. Eine ausführliche Behandlung ist in
\cite{janssen2007} zu finden.

\begin{figure}[!ht]
  \centering
  \subfloat[][Euklidischer Kreis]{\includegraphics[width=.4\textwidth]{img/euclidean_circle.png}}\qquad
  \subfloat[][Taxicab-Kreis]{\includegraphics[width=.4\textwidth]{img/taxicab_circle.png}}\\
  \caption{Alle Punkte auf der Kreislinie haben den gleichen Abstand zum Mittelpunkt.
  Auffallend ist, das der Kreis in Taxicab-Metrik nicht rund, sondern quadratisch ist.}
  \label{img:circle_in_diff_metrics}
\end{figure}

Die Berechnung von Mittelpunkt und Radius eines Kreises ist schwieriger als in euklidischer Geometrie. Es wird hier keine 
Formel benutzt, sondern ein Algorithmus.



%#
\subsection{Platzierung}

Keine Häufigkeitsverteilung gegeben

%#
\subsection{Missionsdauer}

goal runden
missiontime runden

%#
\subsection{Finden des Sammelpunktes}

%#
\subsection{Zeitbeschränkung}

% ############################################
\clearpage
\section{Implementierung}


% ############################################
\clearpage
\section{Diskussion}

\subsection{Performance}

\subsection{Fehlerrechnung}

\subsubsection{Abweichung vom Optimum}

\subsubsection{Fehler durch Modellierung}

\begin{figure}[!ht]
  \centering
  \subfloat[][]{\includegraphics[width=.4\textwidth, angle=0]{img/collected_edges.png}} \qquad
  \subfloat[][]{\includegraphics[width=.4\textwidth, angle=90]{img/collected_edges.png}}\\
  \subfloat[][]{\includegraphics[width=.4\textwidth, angle=180]{img/collected_edges.png}} \qquad
  \subfloat[][]{\includegraphics[width=.4\textwidth, angle=270]{img/collected_edges.png}}
  \caption{Überstreichen der Ecken beim Wechseln in eine benachbarte Zelle: Der Roboter (hier rot),
  kann nicht nur den ursprünglichen, kreisförmigen Teil in der Mitte einer Zelle abernten, 
  sondern beim Wechseln auch die Ecken, da sein Arbeitsbereich diese in der Bewegung überschneidet. }
  \label{fig:harvested_edges}
\end{figure}

\subsection{Lessons learned/Fehlentscheidungen}

\begin{itemize}
\item Zu viele Abstraktion, die sich später unnötig herausgetsellt hat (Geometry, Circle)
\end{itemize}

\subsection{Ausblick}

\nocite{*}

\printbibliography[maxnames=25]



\end{document}
